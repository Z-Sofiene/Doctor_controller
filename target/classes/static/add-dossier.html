<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Dossier</title>
    <script>
        function convertDateToString(date) {
            const d = new Date(date);
            let month = '' + (d.getMonth() + 1);
            let day = '' + d.getDate();
            const year = d.getFullYear();

            if (month.length < 2) month = '0' + month;
            if (day.length < 2) day = '0' + day;

            return [year, month, day].join('-');
        }

        function handleSubmit(event) {
            event.preventDefault();
            const form = document.getElementById('addDossierForm');
            const createdDate = document.getElementById('createdDate').value;
            const completedDate = document.getElementById('completedDate').value;

            const createdDateString = convertDateToString(createdDate);
            let completedDateString='';

            if (completedDate != null) {
                completedDateString = convertDateToString(completedDate);
            }
            const hiddenCreatedDateInput = document.createElement('input');
            hiddenCreatedDateInput.type = 'hidden';
            hiddenCreatedDateInput.name = 'createdDate';
            hiddenCreatedDateInput.value = createdDateString;

            const hiddenCompletedDateInput = document.createElement('input');
            hiddenCompletedDateInput.type = 'hidden';
            hiddenCompletedDateInput.name = 'completedDate';
            hiddenCompletedDateInput.value = completedDateString;

            form.appendChild(hiddenCreatedDateInput);
            form.appendChild(hiddenCompletedDateInput);

            form.submit();
        }
    </script>
</head>
<body>
    <h1>Add Dossier</h1>
    <form id="addDossierForm" action="/api/dossiers" method="post" onsubmit="handleSubmit(event)">
        <label for="p1">First Name:</label><br>
        <input type="text" id="p1" name="patientName"><br>

        <label for="status">Status:</label><br>
        <select id="status" name="status">
            <option value="PENDING">PENDING</option>
            <option value="COMPLETED">COMPLETED</option>
        </select><br><br>

        <label for="createdDate">Created Date:</label><br>
        <input type="date" id="createdDate"><br>

        <label for="completedDate">Completed Date:</label><br>
        <input type="date" id="completedDate"><br><br>

        <button type="submit">Add Dossier</button>
    </form>
</body>
</html>
